# Проект: vendista_bot

## Описание

`vendista_bot` — это Telegram-бот для автоматизации регистрации и уведомлений пользователей о продажах и бонусах в торговых автоматах. Бот предназначен для владельцев торговых автоматов, которые хотят предоставлять своим клиентам бонусы и получать отчеты о продажах в удобной форме через Telegram.

## Установка

1. Клонируйте репозиторий на локальную машину:

    ```bash
    git clone https://github.com/timmn3/vendista_bot.git
    ```

2. Установите необходимые зависимости с помощью pip:

    ```bash
    pip install -r requirements.txt
    ```

3. Создайте файл `.env` в корневой директории проекта и добавьте необходимые переменные окружения:

    ```env
    BOT_TOKEN=<Ваш токен Telegram бота>
    ADMINS=<ID администраторов через запятую>
    DATABASE_URL=<URL вашей базы данных>
    ```

4. Запустите бота:

    ```bash
    python bot.py
    ```

## Основные функции

### Уведомления

- `on_startup_notify(dp: Dispatcher)`: Отправляет сообщение всем администраторам о запуске бота.

### Регистрация пользователей

- `new_user_registration(dp: Dispatcher, user_id, first_name, username)`: Отправляет сообщение администраторам о новом зарегистрированном пользователе.

### Регистрация через команду

- `register(message: types.Message)`: Пользователь может начать процесс регистрации через команду `/register`.

### Проверка и валидация

- `validate_telegram_url(url: str)`: Проверяет правильность введенной ссылки на Telegram-бота.
- `validate_email(email: str)`: Проверяет правильность введенного email.

### Генерация QR-кода

- `send_qr_code(user_id: int)`: Генерация и отправка QR-кода пользователю для использования его клиентами.

### Отчеты

- `send_report_time()`: Автоматическая отправка отчетов в установленное время.
- `get_parsing(login, password, date)`: Получение отчета по продажам с сайта `vendista.ru`.

## Основные команды

- `/start` — Начало работы с ботом.
- `/register` — Запуск процесса регистрации.
- `/qr_code` — Получение QR-кода для автоматов.
- `/report` — Запрос отчета по продажам.
- `/setting_report` — Настройка времени отчетов.

## Клавиатуры и взаимодействие

- `kb_report_cancel` — Клавиатура для отмены отчетов и настройки времени.
- `kb_register_machine` — Клавиатура для регистрации.
- `kb_data` — Клавиатура для ввода данных автомата.

## Логирование

Для логирования используется библиотека `loguru`, которая помогает отслеживать ошибки и действия в процессе выполнения бота.

## Требования

- Python 3.8+
- PostgreSQL или другая совместимая база данных

## Авторы

Этот проект разработан и поддерживается `timmn3`.
